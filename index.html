<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok Video Fetcher</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 30px;
            background-color: #f9f9f9;
        }

        h2 {
            color: #333;
        }

        .steps {
            margin: 20px auto;
            text-align: left;
            padding: 20px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #444;
        }

        textarea {
            width: 100%;
            height: 140px;
            font-family: monospace;
            background: #eee;
            border: 1px solid #ccc;
            padding: 10px;
            resize: none;
            border-radius: 5px;
        }

        button {
            padding: 12px 20px;
            font-size: 16px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
            background: #007bff;
            color: white;
            transition: 0.3s;
        }

        button:hover {
            background: #0056b3;
        }

        .copiedObject {
            margin-top: 20px;
            font-size: 16px;
            font-weight: bold;
            color: green;
        }

        .copy-button {
            padding: 4px 10px;
        }
    </style>
</head>

<body>
    <h2>TikTok Video Fetcher</h2>

    <div class="steps">
        <h3>1. Go to your TikTok profile and open the browser console (F12 → Console)</h3>
        <h3>2. Copy this code:</h3>
        <textarea id="scriptBox" readonly>
            function getVideoLinks() {
                let videoLinks = [];
                document.querySelectorAll('a[href*="/video/"]').forEach(link => {
                    let url = link.href;
                    if (!videoLinks.includes(url)) {
                        videoLinks.push(url);
                    }
                });
            
                if (videoLinks.length > 0) {
                    let textToCopy = videoLinks.join("\n");
            
                    // Create custom modal with copy button
                    let modal = document.createElement("div");
                    modal.style.position = "fixed";
                    modal.style.top = "0";
                    modal.style.left = "0";
                    modal.style.width = "100%";
                    modal.style.height = "100%";
                    modal.style.backgroundColor = "rgba(0, 0, 0, 0.5)";
                    modal.style.display = "flex";
                    modal.style.alignItems = "center";
                    modal.style.justifyContent = "center";
                    modal.style.zIndex = "1000";
            
                    let modalContent = document.createElement("div");
                    modalContent.style.backgroundColor = "white";
                    modalContent.style.padding = "20px";
                    modalContent.style.borderRadius = "8px";
                    modalContent.style.maxWidth = "500px";
                    modalContent.style.textAlign = "center";
                    modalContent.style.boxShadow = "0 4px 6px rgba(0, 0, 0, 0.1)"; 
            
                    let message = document.createElement("p");
                    message.textContent = "✅ Video links extracted! Click below to copy.";
                    message.style.color = "black";  
                    message.style.fontSize = "16px";
                    modalContent.appendChild(message);
            
                    let textarea = document.createElement("textarea");
                    textarea.value = textToCopy;
                    textarea.style.width = "100%";
                    textarea.style.height = "150px";
                    textarea.style.fontSize = "14px";
                    textarea.style.border = "1px solid #ccc";
                    textarea.style.padding = "10px";
                    textarea.style.marginTop = "10px";
                    modalContent.appendChild(textarea);
            
                    let copyButton = document.createElement("button");
                    copyButton.textContent = "Copy Links";
                    copyButton.style.margin = "10px";
                    copyButton.style.padding = "12px 24px";
                    copyButton.style.fontSize = "16px";
                    copyButton.style.backgroundColor = "#4CAF50";  
                    copyButton.style.color = "white";
                    copyButton.style.border = "none";
                    copyButton.style.borderRadius = "5px";
                    copyButton.style.cursor = "pointer";
                    copyButton.style.transition = "background-color 0.3s ease";
                    modalContent.appendChild(copyButton);
            
                    let closeButton = document.createElement("button");
                    closeButton.textContent = "Close";
                    closeButton.style.margin = "10px";
                    closeButton.style.padding = "12px 24px";
                    closeButton.style.fontSize = "16px";
                    closeButton.style.backgroundColor = "#f44336";  
                    closeButton.style.color = "white";
                    closeButton.style.border = "none";
                    closeButton.style.borderRadius = "5px";
                    closeButton.style.cursor = "pointer";
                    closeButton.style.transition = "background-color 0.3s ease";
                    modalContent.appendChild(closeButton);
            
                    modal.appendChild(modalContent);
                    document.body.appendChild(modal);
            
                    copyButton.addEventListener("click", function() {
                        textarea.select();
                        document.execCommand("copy");
                        alert("✅ Video links copied to clipboard!");
                        document.body.removeChild(modal);
                    });
            
                    closeButton.addEventListener("click", function() {
                        document.body.removeChild(modal);
                    });
            
                    console.log("✅ Video links extracted! Click 'Copy Links' to copy.");
                } else {
                    console.log("No videos found!");
                    alert("No videos found!");
                }
            }
            getVideoLinks();
            
        </textarea>
        <button id="copyScriptButton" onclick="copyScript()">Copy Script</button>

        <h3>3. Paste it into the browser console and Press Enter</h3>
        <h3>4. Click this paste button</h3>
        <button onclick="pasteContent()" style="margin-bottom: 10px;">Paste</button>
        <div>This is your copied object:</div>
        <div id="pastedContent"></div>
    </div>

    <script>
        function copyScript() {
            let scriptBox = document.getElementById("scriptBox");
            scriptBox.select();
            document.execCommand("copy");

            let button = document.getElementById("copyScriptButton");
            button.textContent = "Copied!"; // Change button text

            // Reset text back to "Copy Script" after 2 seconds
            setTimeout(() => {
                button.textContent = "Copy Script";
            }, 2000);
        }

        async function pasteContent() {
            try {
                const clipboardText = await navigator.clipboard.readText();
                let pastedContentDiv = document.getElementById("pastedContent");
                pastedContentDiv.textContent = clipboardText;
            } catch (err) {
                console.error("Failed to read clipboard contents: ", err);
            }
        }


        // Function to display links with individual copy buttons
        function displayLinksWithCopyButtons(links) {
            const pastedContentDiv = document.getElementById("pastedContent");
            pastedContentDiv.innerHTML = ''; // Clear any previous content

            links.forEach(link => {
                // Create a div to hold each link and its copy button
                const linkContainer = document.createElement('div');
                linkContainer.style.marginBottom = '10px';

                // Create the link element
                const linkElement = document.createElement('a');
                linkElement.href = link;
                linkElement.target = "_blank"; // Open in a new tab
                linkElement.textContent = link;
                linkContainer.appendChild(linkElement);

                // Create the copy button
                const copyButton = document.createElement('button');
                copyButton.textContent = "Copy Link";
                copyButton.style.marginLeft = '10px';
                copyButton.classList.add('copy-button');

                // Add click event to copy the link to clipboard
                copyButton.addEventListener('click', function () {
                    navigator.clipboard.writeText(link);
                    copyButton.textContent = "Copied!"; // Change button text

                    // Reset text back to "Copy Link" after 2 seconds
                    setTimeout(() => {
                        copyButton.textContent = "Copy Link";
                    }, 2000);
                });

                // Append link and copy button to the container
                linkContainer.appendChild(copyButton);
                pastedContentDiv.appendChild(linkContainer);
            });
        }


        // Function to handle pasted content from the clipboard
        async function pasteContent() {
            try {
                const clipboardText = await navigator.clipboard.readText();
                let videoLinks = clipboardText.split("\n");
                displayLinksWithCopyButtons(videoLinks);
            } catch (err) {
                console.error("Failed to read clipboard contents: ", err);
            }
        }

    </script>
</body>

</html>